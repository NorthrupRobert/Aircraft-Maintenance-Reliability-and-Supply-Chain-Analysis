Table sdr {
  operating_control_number varchar [primary key]
  difficulty_date datetime
  submission_date datetime
  operator_designator varchar
  submit_designator varchar
  submit_type char
  region_code varchar
  receiving_district_office int
  sdr_type char
  jasc_code varchar
  nat_of_cond_a char
  nat_of_cond_b char
  nat_of_cond_c char
  precautionary_procedure_a varchar
  precautionary_procedure_b varchar
  precautionary_procedure_c varchar
  precautionary_procedure_d varchar
  stage_of_operation_code varchar
  how_discovered_code varchar
  crack_length int
  number_of_cracks int
  corrosion_level int
  structural_other	text //e.g. WING LEADING EDGE, R STAB STA 184.70, CUSTOMER REQUEST, KRAS 206, SLAT #4, L STAB STA 129.50
  discrepancy text

  //Foreign keys to normalized tables
  aircraft_serial varchar [ref: < aircraft.serial]
  part_serial_number varchar [ref: < part.serial]
  component_serial_number varchar [ref: < component.serial]
}

Table aircraft {
  serial varchar [primary key]
  registry_n_number varchar
  make varchar
  model varchar
  total_time float
  total_cycles int
}

Table engine {
  serial varchar [primary key]
  make varchar
  model varchar
  total_time float
  total_cycles int
  aircraft_serial varchar [ref: < aircraft.serial]
}

Table propeller {
  serial_number varchar [primary key]
  make varchar
  model varchar
  total_time int
  total_cycles int
  aircraft_serial varchar [ref: < aircraft.serial]
}

Table work_order {
  id varchar [primary key]
  sdr_operating_control_number varchar [Ref: < sdr.operating_control_number]
  date_discovered datetime
  discovery_code varchar //e.g. OP, V
  discrepancy text
  corrective_action text
  part_number varchar
  part_name varchar
  part_serial varchar [ref: < part.serial]
  jasc_code varchar
  maintenance_type varchar //e.g. Line, Base, Overnight, ...
}

Table part {
  serial varchar [primary key]
  component_serial varchar [Ref: < component.serial]
  make varchar
  name varchar
  part_number varchar [ref: < parts_master.part_number]
  condition varchar
  location text //e.g. ZONE 200, STALL, GIRT BAR, BLEED SYS, NR 1 ENGINE, ZONE 600 FLAP, EMERGENCY LIGHT, ...
  total_time int
  total_cycles int
  time_since int
  since_code char
}

Table component {
  serial varchar [primary key]
  aircraft_serial varchar [ref: < aircraft.serial]
  name varchar
  make varchar
  model varchar
  part_number varchar
  location varchar
  total_time int
  total_cycles int
  time_since int
  since_code char
}

Table structural_location {
  id int [primary key]
  sdr_operating_control_number varchar [ref: < sdr.operating_control_number]
  from varchar //e.g. 727D, 947, 950, 147.9, 1006+5
  to varchar
  stringer_from varchar
  string_from_side char //e.g. L, R
  stringer_to varchar
  string_to_side char
  WingStationFrom	varchar
  WingStationFromSide	char
  WingStationTo	varchar
  WingStationToSide	char
  ButtLineFrom varchar
  ButtLineFromSide	char
  ButtlineTo varchar
  ButtlineToSide	char
  WaterLineFrom	varchar
  WaterLineTo varchar
}

Table failure {
  id int [primary key]
  component_serial varchar [ref: < component.serial]
  part_serial varchar [ref: < part.serial]
  failure_date datetime
  failure_mode varchar //e.g. leak, crack, short, seized, ...
  detected_by varchar //e.g. pilot, maintenance, etc
  sdr_operating_control_number varchar [ref: < sdr.operating_control_number]
}

Table bench_stock {
  part_number varchar [ref: < parts_master.part_number]
  location varchar // e.g. RNO, LAX, JFK
  quantity_on_hand int
  reorder_point int
  reorder_quantity int
  unit_cost float
  lead_time_days int
  supplier_id varchar [ref: < supplier.id]

  primary key (part_number, location)
}

Table supplier {
  id varchar [primary key]
  name varchar
  on_time_delivery_rate float
  avg_delay_days int
  quality_rating float
}

Table purchase_order {
  id int [primary key]
  supplier_id varchar [ref: < supplier.id]
  part_number varchar [ref: < parts_master.part_number]
  quantity int
  order_date datetime
  expected_delivery_date datetime
  actual_delivery_date datetime
  unit_cost float
  status varchar   // e.g. ordered, shipped, received, delayed
}

Table parts_master {
  part_number varchar [primary key]
  make varchar
  name varchar
}

Table work_order_part_usage {
  work_order_id varchar [ref: < work_order.id]
  part_number varchar [ref: < parts_master.part_number]
  location varchar
  quantity_used int

  primary key (work_order_id, part_number, location)
}

Table serialized_part_inventory {
  serial varchar [primary key, ref: < part.serial]
  location varchar        // e.g. RNO, LAX, JFK, Vendor, Shop
  status varchar          // e.g. serviceable, unserviceable, in_repair, in_transit
  last_moved datetime
}

